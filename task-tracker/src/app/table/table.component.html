<div class="filter-button">
<button mat-raised-button color="primary" (click)="isVisibleFilter = !isVisibleFilter">filter</button>
    @if(isVisibleFilter){
      <form [formGroup]="filter" class="form" novalidate >

      <span class="field-title">BY employee:</span>
      <mat-form-field appearance="outline" class="field-content">
      <input
        matInput
        formControlName="employee"
      />
      </mat-form-field>
      <span class="field-title">BY deadline:</span>
      <mat-form-field appearance="outline" class="field-content">
      <input
        type="date"
        matInput
        formControlName="deadline"
      />
    </mat-form-field>

      <span class="field-title">BY status:</span>
      <mat-form-field appearance="outline" class="field-content">

      <mat-select formControlName="status">
        <mat-option value="in progress">in progress</mat-option>
        <mat-option value="review">review</mat-option>
        <mat-option value="to do">to do</mat-option>
        <mat-option value="done">done</mat-option>
      </mat-select>
    </mat-form-field>
  </form>
  }
</div>

<table mat-table [dataSource]="tasks" matSort (matSortChange)="announceSortChange($event)" class="main-table">
  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef> Title </th>
    <td mat-cell *matCellDef="let task"> {{task.title}} </td>
  </ng-container>
  <ng-container matColumnDef="employee">
    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by employee"> Employee </th>
    <td mat-cell *matCellDef="let task"> {{task.employee}} </td>
  </ng-container>
  <ng-container matColumnDef="deadline">
    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by deadline"> Deadline </th>
    <td mat-cell *matCellDef="let task"> {{task.deadline | date: 'd MMMM YYYY'}} </td>
  </ng-container>
  <ng-container matColumnDef="priority">
    <th mat-header-cell *matHeaderCellDef> Priority </th>
    <td mat-cell *matCellDef="let task"> {{task.priority}} </td>
  </ng-container>
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by status"> Status </th>
    <td mat-cell *matCellDef="let task"> {{task.status}} </td>
  </ng-container>
  <ng-container matColumnDef="description">
    <th mat-header-cell *matHeaderCellDef> Detail description </th>
    <td mat-cell *matCellDef="let task" (click)="showInfo($event, task)">More info...</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    mat-row
    (click)="redactTask(row)"
    *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
